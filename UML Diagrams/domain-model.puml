@startuml

' ---------------------------
' Alapos osztályok definiálása
' ---------------------------

class ApplicationUser {
	- Id : string
	- UserName : string
	- NormalizedUserName : string
	- Email : string
	- NormalizedEmail : string
	- EmailConfirmed : bool
	- PasswordHash : string
	- SecurityStamp : string
	- ConcurrencyStamp : string
	- PhoneNumber : string
	- PhoneNumberConfirmed : bool
	- TwoFactorEnabled : bool
	- LockoutEnd : DateTime?
	- LockoutEnabled : bool
	- AccesFailedCount : int
}

class Character {
  - CharacterId : int
  - AstroSign : string
  - Gender : string
}

class Inventory {
  - InventoryId : int
  - TotalScore : int
  - Material01 : int
  - Material02 : int
  - Material03 : int
  - Material04 : int
  - Material05 : int
  - Material06 : int
  - Material07 : int
  - Material08 : int
  - Material09 : int
  - Material10 : int
  - Material11 : int
  - Material12 : int
  - Material13 : int
  - Material14 : int
  - Material15 : int
  - Material16 : int
  - Material17 : int
  - Material18 : int
  - Material19 : int
  - Material20 : int
  - Material21 : int
  - Material22 : int
  - Material23 : int
  - Material24 : int
}

class Island {
  - IslandId : int
  - IslandName : string
  - Element : string
}

class LoginModel {
  - Email : string
  - Password : string
}

class Material {
  - MaterialId : string
  - WitchName : string
  - EnglishName : string
  - LatinName : string
}

class Player {
  - PlayerId : int
  - PlayerName : string
  - UserId : string
  - CharacterId : int
  - IslandId : int
  - InventoryId : int
  - RecipeBookId : int
  - LastLogin : DateTime?
  - CreatedAt : DateTime
}

class RecipeBook {
  - RecipeId : int
  - RecipeName : string
  - Acquired : string
}

' ---------------------------
' Kapcsolatok beállítása
' ---------------------------

' Inventory "belongs to" Player (a PlayerId alapján)
Inventory "1" -- "1" Player : belongs to.

' Island-nek több Player-je van
Island "1" -- "0..*" Player : has

' Player kapcsolódik az ApplicationUser-hez
Player "1" -- "1" ApplicationUser : belongs to

' Player rendelkezik egy Character-rel
Player "1" -- "1" Character : has

' Player rendelkezik egy RecipeBook-kal
Player "1" -- "1" RecipeBook : has

' (Már jelöltük az Island kapcsolatot a Player-rel, ezért ezt opcionálisan is meg lehet jelölni)
Player "1" -- "1" Island : belongs to

' ---------------------------
' ApplicationDbContext osztály (DbSet-ekkel)
' ---------------------------

class ApplicationDbContext {
  + Players : DbSet<Player>
  + Inventories : DbSet<Inventory>
  + Characters : DbSet<Character>
  + Materials : DbSet<Material>
  + RecipeBooks : DbSet<RecipeBook>
  + Islands : DbSet<Island>
}

' A context "has" a domain entitásokat (lágy függőségek)
ApplicationDbContext ..> Player
ApplicationDbContext ..> Inventory
ApplicationDbContext ..> Character
ApplicationDbContext ..> Material
ApplicationDbContext ..> RecipeBook
ApplicationDbContext ..> Island

@enduml
